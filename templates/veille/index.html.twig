{% extends 'base.html.twig' %}

{% block title %}Veille Technologique - Portfolio{% endblock %}

{% block body %}
    <div class="veille-header">
        <h1 class="section-title">Veille Technologique</h1>
        <p class="lead">Restez informé des dernières tendances et innovations dans le développement web.</p>
    </div>

    <div class="categories mb-4">
        <button class="btn btn-outline-primary category-btn active" data-category="all">Tout</button>
        <button class="btn btn-outline-primary category-btn" data-category="IA">IA</button>
        <button class="btn btn-outline-primary category-btn" data-category="Mobile">Mobile</button>
        <button class="btn btn-outline-primary category-btn" data-category="DevOps">DevOps</button>
    </div>

    <div class="articles-grid">
        {% for article in articles %}
            {% set category = article.category is defined ? article.category : article.getCategory() %}
            {% set title = article.title is defined ? article.title : article.getTitle() %}
            {% set description = article.description is defined ? article.description : article.getDescription() %}
            {% set date = article.date is defined ? article.date : article.getPublishedAt() %}
            {% set source = article.source is defined ? article.source : article.getSource() %}
            {% set url = article.url is defined ? article.url : article.getUrl() %}
            
            <div class="article-item" data-category="{{ category }}">
                <div class="card">
                    <div class="card-body">
                        <span class="category-badge" style="background-color: {{ veille_get_category_color(category) }}20; color: {{ veille_get_category_color(category) }};">
                            <i class="{{ veille_get_category_icon(category) }}"></i>
                            {{ category }}
                        </span>
                        <h5 class="card-title">{{ title }}</h5>
                        <p class="card-text">{{ veille_get_short_description(description, 120) }}</p>
                        <div class="article-meta">
                            <span class="date">
                                <i class="far fa-calendar"></i>
                                {{ veille_format_date(date) }}
                            </span>
                            <div class="sources">
                                <span class="source">{{ source }}</span>
                                <a href="{{ url }}" target="_blank" rel="noopener">
                                    <i class="fas fa-external-link-alt"></i>
                                    Lire l'article
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12 text-center">
                <div class="no-articles">
                    <i class="fas fa-newspaper fa-3x text-muted mb-3"></i>
                    <h3 class="text-muted">Aucun article disponible</h3>
                    <p class="text-muted">La veille technologique sera mise à jour automatiquement.</p>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %} 